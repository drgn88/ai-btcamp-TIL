## 목차
- [CMOS VLSI](#cmos-vlsi)
	- [MOSFET 구분](#mosfet-구분)
	- [⭐Chip화의 장점](#chip화의-장점)
	- [About silicon](#about-silicon)
		- [전자 Vs hole의 전기량](#전자-vs-hole의-전기량)
		- [전자 Vs hole 속도차이](#전자-vs-hole-속도차이)
		- [Silicon-공유결합](#silicon-공유결합)
	- [MOSFET](#mosfet)
		- [Field Effect](#field-effect)
			- [NMOS](#nmos)
			- [PMOS](#pmos)
		- [Body Effect](#body-effect)
	- [CMOS Schematic](#cmos-schematic)
		- [CMOS Schematic](#cmos-schematic-1)
			- [Q. PMOS NMOS 위치 바꿈 안될까?](#q-pmos-nmos-위치-바꿈-안될까)
		- [TR level로 설계이유](#tr-level로-설계이유)
			- [예시](#예시)
			- [진리표](#진리표)
- [Custom Compiler](#custom-compiler)
	- [실행 순서](#실행-순서)
		- [1. 소스](#1-소스)
		- [2. 라이브러리 생성](#2-라이브러리-생성)
		- [3. cell view 설정](#3-cell-view-설정)
		- [4. 설계환경 세팅](#4-설계환경-세팅)
			- [격자 size 세팅](#격자-size-세팅)
		- [5. Instance 불러오기](#5-instance-불러오기)
		- [6. CMOS 속성 설정하기(Channel Width)](#6-cmos-속성-설정하기channel-width)
		- [7. Labeling하기](#7-labeling하기)
		- [8. Pin 배치하기](#8-pin-배치하기)
		- [9. Symbol 생성하기](#9-symbol-생성하기)
		- [10. 설계한 회로 Test](#10-설계한-회로-test)
		- [11. Test Cell 불러오기](#11-test-cell-불러오기)
		- [12. GND, VDC 세팅하기](#12-gnd-vdc-세팅하기)
		- [13. 완성 Test Schematic](#13-완성-test-schematic)
	- [Prime Wave 시뮬레이션 세팅](#prime-wave-시뮬레이션-세팅)
		- [1. Prime Wave 켜기](#1-prime-wave-켜기)
		- [2. Model File 불러오기](#2-model-file-불러오기)
		- [3. HSPICE 설정하기](#3-hspice-설정하기)
		- [4. Design 불러오기](#4-design-불러오기)
		- [5. 테스트 입력값 설정하기](#5-테스트-입력값-설정하기)
		- [6. Test 신호 설정하기](#6-test-신호-설정하기)
		- [7. 시뮬레이션 돌리기](#7-시뮬레이션-돌리기)
		- [결과](#결과)
	- [단축키](#단축키)
	- [⭐lock파일 삭제](#lock파일-삭제)
	- [수정 필요시](#수정-필요시)

# CMOS VLSI

## MOSFET 구분
1. invert symbol
2. body
3. source current directon

## ⭐Chip화의 장점
1. 가격 절감
2. 파워 절감
3. 속도 향상

## About silicon
### 전자 Vs hole의 전기량
- 둘이 똑같음

### 전자 Vs hole 속도차이
- 모빌리티가 electron이 더 큼
  - 약 2배가량

### Silicon-공유결합
- Si: 4가 원자
  - 진성 반도체(intrinsic)
- Doping(불순물)
  - 3가 혹은 5가 원소를 공유결합시킴
    - 3가: P형(hole)
    - 5가: N형(electron)
- PN junction
  - Depletion region 생성

## MOSFET
> Metal Oxide Semiconductor Field Effect TR
![alt text](image.png)<br>
### Field Effect
- 수직 수평 전계 존재
  - 각각의 전계에 따른 현상 이해 필요
- 각각 2개의 단자 필요
- 그래서 4개의 단자 필요
  - 실제는 source body결합
  - source 옆에 P+ 영역 생성
    - +: Carrier 수 증가 ---> 저항 감소
#### NMOS
- 수직 전계(NMOS 기준)
  - gate가 body보다 높아야함
  - Threshold Volatage이상 걸어줘야 Channel 형성
    - VGS 기준
- 수평 전계(NMOS 기준)
  - source, drain의 전압 방향 바꿔도 됨
  - (+)전압 주는 쪽이 Drain
- ⭐NMOS Body는 GND
#### PMOS
- 수직 전계(PMOS 기준)
  - gate가 body보다 낮아야함
  - Threshold Volatage이상 걸어줘야 Channel 형성
    - VGS 기준
- 수평 전계(PMOS 기준)
  - source, drain의 전압 방향 바꿔도 됨
  - (-)전압 주는 쪽이 Drain
- ⭐PMOS Body는 VDD

### Body Effect
> Body단자가 따로 있는 경우 발생
- Body(Substrate)에 전압이 인가되어 Threshold Voltage가 달라짐

## CMOS Schematic
### CMOS Schematic
- 기본꼴: ~(logic)
- AND
  - NMOS 직렬
  - PMOS 병렬
- OR
  - NMOS 병렬
  - PMOS 직렬

#### Q. PMOS NMOS 위치 바꿈 안될까?
- 바꿔도 되긴함
- 근데 배선이 복잡해짐
  - Source-Body 배선이 꼬임

### TR level로 설계이유
- TR의 개수를 줄일 수 있다
#### 예시
#### 진리표
|   A   |   B   |   C   |   Y   |
| :---: | :---: | :---: | :---: |
|   0   |   0   |   0   |   0   |
|   0   |   0   |   1   |   1   |
|   0   |   1   |   0   |   1   |
|   0   |   1   |   1   |   1   |
|   1   |   0   |   0   |   1   |
|   1   |   0   |   1   |   0   |
|   1   |   1   |   0   |   1   |
|   1   |   1   |   1   |   0   |

- Y = AxorC + A' * B = AxorC + B*C'
- Gate로 따지면 TR개수 30개
- CMOS schematic으로 그리면 TR개수 14개
  - Logic level에서보다 TR개수가 줄어듦
  - PPA 개선


# Custom Compiler
## 실행 순서
### 1. 소스
![alt text](image-2.png)<br>
- 툴을 위한 csh파일을 sourcing함
- 이후 custom compiler 실행

### 2. 라이브러리 생성

![alt text](image-3.png)<br>
![alt text](image-4.png)<br>
- Tech library에 PDK 공정 세팅

### 3. cell view 설정

![alt text](image-5.png)<br>
![alt text](<스크린샷 2025-06-16 151455.png>)<br>
- Cell view에서 내가 설계할 Cell의 이름 설정 후 파일 생성

### 4. 설계환경 세팅
#### 격자 size 세팅
![alt text](<스크린샷 2025-06-16 151527.png>)<br>
![alt text](<스크린샷 2025-06-16 151608.png>)<br>
- 위 사진처럼 세팅하면 격자간 간격이 좁아지며 부드러워짐

### 5. Instance 불러오기
![alt text](<스크린샷 2025-06-16 153516.png>)<br>
![alt text](<스크린샷 2025-06-16 152358.png>)<br>
- 단축키 i를 누르면 instance 불러오는 창 나옴
- library에서 사용할 공정단위의 cell을 불러올 수 있음

### 6. CMOS 속성 설정하기(Channel Width)
![alt text](<스크린샷 2025-06-16 153649.png>)<br>
![alt text](<스크린샷 2025-06-16 153706.png>)<br>
- 단축키 q를 누르면 cell의 속성창에 들어갈 수 있음
- PMOS(hole)는 NMOS(electron)보다 u(모빌리티)가 약 2배 느림
- 따라서 PMOS의 Channel Width를 NMOS보다 2배 늘여야 함
  - PMOS: 1u
  - NMOS: 0.5u

### 7. Labeling하기
![alt text](image-8.png)<br>
- 단축키 l을 누르면 wire labeling을 할 수 있음
- wire에 이름을 붙일 수 있음

### 8. Pin 배치하기
![alt text](<스크린샷 2025-06-16 154141-2.png>)<br>
![alt text](<스크린샷 2025-06-16 154232-1.png>)<br>
- 단축키 P를 누르면 Pin을 배치할 수 있음
- pin 설정에서 input, output pin을 설정할 수 있음
  - 생성된 pin은 동일한 이름의 label을 가진 wire와 연결됨

### 9. Symbol 생성하기
![alt text](image-9.png)<br>
![alt text](<스크린샷 2025-06-16 154549.png>)<br>
- 위 사진의 옵션에 들어가서 Symbol을 세팅함
- symbol port의 위치를 설정가능

![alt text](image-10.png)<br>
- 사진의 화살표에서 Symbol을 그려줄 수 있음
- 해당 도구를 이용해 Inverter 심볼을 그려줌

### 10. 설계한 회로 Test
![alt text](<스크린샷 2025-06-16 161522.png>)<br>
![alt text](image-11.png)<br>
![alt text](image-12.png)<br>
- 설계한 Cell에서 schematic을 선택하고
- Cell Name의 Test할 파일 이름을 설정 후 생성함

### 11. Test Cell 불러오기
![alt text](<스크린샷 2025-06-16 161809.png>)<br>
- 단축키 i를 눌러 내가 설계한 라이브러리의 Cell을 불러옴

### 12. GND, VDC 세팅하기
![alt text](<스크린샷 2025-06-16 163105.png>)<br>
![alt text](<스크린샷 2025-06-16 163343.png>)<br>
- Instance의 analog library에서 GND와 VDC를 불러올 수 있음

![alt text](image-13.png)<br>
![alt text](<스크린샷 2025-06-16 163529.png>)<br>
![alt text](<스크린샷 2025-06-16 163538.png>)<br>
![alt text](<스크린샷 2025-06-16 163557.png>)<br>
- 불러온 VDC에 대해 VIN, VDD, VSS의 속성에 들어가 전압을 설정
  - VIN: VIN입력
  - VDD: 1입력
  - VSS: 0입력

### 13. 완성 Test Schematic
![alt text](image-14.png)<br>

## Prime Wave 시뮬레이션 세팅
### 1. Prime Wave 켜기
![alt text](<스크린샷 2025-06-16 163802.png>)<br>
- 해당 툴바로 가면 Prime Wave를 실행시킬 수 있다

### 2. Model File 불러오기
![alt text](<스크린샷 2025-06-16 163827.png>)<br>
![alt text](image-15.png)<br>
![alt text](<스크린샷 2025-06-16 164131.png>)<br>
![alt text](image-17.png)<br>
- 위의 과정을 거쳐 hspice 기반 Model file을 불러온다

### 3. HSPICE 설정하기
![alt text](image-18.png)<br>
![alt text](<스크린샷 2025-06-16 164554.png>)<br>

### 4. Design 불러오기
![alt text](<스크린샷 2025-06-16 164609.png>)<br>
![alt text](<스크린샷 2025-06-16 164629.png>)<br>
- Test할 Cell을 불러온 다음 VIN에 0을 Default로 넣어줌
  - VIN은 NOT_TEST에서 VIN의 속성창에 설정해준 **VIN**임

### 5. 테스트 입력값 설정하기
![alt text](<스크린샷 2025-06-16 164636.png>)<br>
![alt text](<스크린샷 2025-06-16 164657.png>)<br>

### 6. Test 신호 설정하기
![alt text](image-19.png)<br>
![alt text](<스크린샷 2025-06-16 164717.png>)<br>
- Expression을 누른 후,
- 우측에 pick from design 누름
- 누르면 나오는 Schematic에서 내가 확인할 신호를 선택함

![alt text](<스크린샷 2025-06-16 164741.png>)<br>
> 예시

### 7. 시뮬레이션 돌리기
![alt text](<스크린샷 2025-06-16 164857.png>)<br>
![alt text](<스크린샷 2025-06-16 164902.png>)<br>
- 위에 대로 들어가서 누르면 시뮬레이션 실행됨

### 결과
![alt text](<스크린샷 2025-06-16 171845.png>)<br>
- Inverter의 동작대로 시뮬레이션 결과가 나온다

## 단축키
- F: Full screen
- W: Wire 단축키
- Q: 속성 단축키
- P: Pin 
	- input pin
	- output pin
- I: Instance 창 열기
- E: 심볼 안
	ctrl+E: 심볼 빠져나옴


## ⭐lock파일 삭제
> 툴이 강제로 종료되어 파일이 읽기모드로 잠긴 경우
- [삭제방법](https://blog.naver.com/PostView.naver?blogId=byoungjin70&logNo=223149305944&categoryNo=1&parentCategoryNo=0&viewDate=&currentPage=8&postListTopCurrentPage=1&from=postView&userTopListOpen=true&userTopListCount=5&userTopListManageOpen=false&userTopListCurrentPage=8)
- cd 라이브러리 이름/Cell이름/schematic/
- rm ./sch.oa.cdslck
- ![alt text](image-20.png)<br>

## 수정 필요시
- 논리 게이트 수정필요시
- TR 레벨에서 수정해야함
  - 제일 하위 레벨을 수정해야함
