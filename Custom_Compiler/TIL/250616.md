## 목차
- [CMOS VLSI](#cmos-vlsi)
	- [MOSFET 구분](#mosfet-구분)
	- [⭐Chip화의 장점](#chip화의-장점)
	- [About silicon](#about-silicon)
		- [전자 Vs hole의 전기량](#전자-vs-hole의-전기량)
		- [전자 Vs hole 속도차이](#전자-vs-hole-속도차이)
		- [Silicon-공유결합](#silicon-공유결합)
	- [MOSFET](#mosfet)
		- [Field Effect](#field-effect)
			- [NMOS](#nmos)
			- [PMOS](#pmos)
		- [Body Effect](#body-effect)
	- [CMOS Schematic](#cmos-schematic)
		- [CMOS Schematic](#cmos-schematic-1)
			- [Q. PMOS NMOS 위치 바꿈 안될까?](#q-pmos-nmos-위치-바꿈-안될까)
		- [TR level로 설계이유](#tr-level로-설계이유)
			- [예시](#예시)
			- [진리표](#진리표)
- [Custom Compiler](#custom-compiler)
	- [실행 순서](#실행-순서)
		- [1. 소스](#1-소스)
		- [2. 라이브러리 생성](#2-라이브러리-생성)
		- [3. cell view 설정](#3-cell-view-설정)
		- [4. 설계환경 세팅](#4-설계환경-세팅)
			- [격자 size 세팅](#격자-size-세팅)
		- [5. Instance 불러오기](#5-instance-불러오기)
		- [6. CMOS 속성 설정하기(Channel Width)](#6-cmos-속성-설정하기channel-width)
		- [7. Labeling하기](#7-labeling하기)
		- [8. Pin 배치하기](#8-pin-배치하기)
		- [9. Symbol 생성하기](#9-symbol-생성하기)
		- [10. 설계한 회로 Test](#10-설계한-회로-test)
		- [11. Test Cell 불러오기](#11-test-cell-불러오기)
		- [12. GND, VDC 세팅하기](#12-gnd-vdc-세팅하기)
		- [13. 완성 Test Schematic](#13-완성-test-schematic)
	- [Prime Wave 시뮬레이션 세팅](#prime-wave-시뮬레이션-세팅)
		- [1. Prime Wave 켜기](#1-prime-wave-켜기)
		- [2. Model File 불러오기](#2-model-file-불러오기)
		- [3. HSPICE 설정하기](#3-hspice-설정하기)
		- [4. Design 불러오기](#4-design-불러오기)
		- [5. 테스트 입력값 설정하기](#5-테스트-입력값-설정하기)
		- [6. Test 신호 설정하기](#6-test-신호-설정하기)
		- [7. 시뮬레이션 돌리기](#7-시뮬레이션-돌리기)
		- [결과](#결과)
	- [단축키](#단축키)
	- [⭐lock파일 삭제](#lock파일-삭제)
	- [수정 필요시](#수정-필요시)

# CMOS VLSI

## MOSFET 구분
1. invert symbol
2. body
3. source current directon

## ⭐Chip화의 장점
1. 가격 절감
2. 파워 절감
3. 속도 향상

## About silicon
### 전자 Vs hole의 전기량
- 둘이 똑같음

### 전자 Vs hole 속도차이
- 모빌리티가 electron이 더 큼
  - 약 2배가량

### Silicon-공유결합
- Si: 4가 원자
  - 진성 반도체(intrinsic)
- Doping(불순물)
  - 3가 혹은 5가 원소를 공유결합시킴
    - 3가: P형(hole)
    - 5가: N형(electron)
- PN junction
  - Depletion region 생성

## MOSFET
> Metal Oxide Semiconductor Field Effect TR
![image](https://github.com/user-attachments/assets/f3674d36-35e7-4d64-9862-577c84dd191c)<br>
### Field Effect
- 수직 수평 전계 존재
  - 각각의 전계에 따른 현상 이해 필요
- 각각 2개의 단자 필요
- 그래서 4개의 단자 필요
  - 실제는 source body결합
  - source 옆에 P+ 영역 생성
    - +: Carrier 수 증가 ---> 저항 감소
#### NMOS
- 수직 전계(NMOS 기준)
  - gate가 body보다 높아야함
  - Threshold Volatage이상 걸어줘야 Channel 형성
    - VGS 기준
- 수평 전계(NMOS 기준)
  - source, drain의 전압 방향 바꿔도 됨
  - (+)전압 주는 쪽이 Drain
- ⭐NMOS Body는 GND
#### PMOS
- 수직 전계(PMOS 기준)
  - gate가 body보다 낮아야함
  - Threshold Volatage이상 걸어줘야 Channel 형성
    - VGS 기준
- 수평 전계(PMOS 기준)
  - source, drain의 전압 방향 바꿔도 됨
  - (-)전압 주는 쪽이 Drain
- ⭐PMOS Body는 VDD

### Body Effect
> Body단자가 따로 있는 경우 발생
- Body(Substrate)에 전압이 인가되어 Threshold Voltage가 달라짐

## CMOS Schematic
### CMOS Schematic
- 기본꼴: ~(logic)
- AND
  - NMOS 직렬
  - PMOS 병렬
- OR
  - NMOS 병렬
  - PMOS 직렬

#### Q. PMOS NMOS 위치 바꿈 안될까?
- 바꿔도 되긴함
- 근데 배선이 복잡해짐
  - Source-Body 배선이 꼬임

### TR level로 설계이유
- TR의 개수를 줄일 수 있다
#### 예시
#### 진리표
|   A   |   B   |   C   |   Y   |
| :---: | :---: | :---: | :---: |
|   0   |   0   |   0   |   0   |
|   0   |   0   |   1   |   1   |
|   0   |   1   |   0   |   1   |
|   0   |   1   |   1   |   1   |
|   1   |   0   |   0   |   1   |
|   1   |   0   |   1   |   0   |
|   1   |   1   |   0   |   1   |
|   1   |   1   |   1   |   0   |

- Y = AxorC + A' * B = AxorC + B*C'
- Gate로 따지면 TR개수 30개
- CMOS schematic으로 그리면 TR개수 14개
  - Logic level에서보다 TR개수가 줄어듦
  - PPA 개선


# Custom Compiler
## 실행 순서
### 1. 소스
![image](https://github.com/user-attachments/assets/64f1ea58-c3be-4089-9a66-7c1e8b5d5b5d)<br>
- 툴을 위한 csh파일을 sourcing함
- 이후 custom compiler 실행

### 2. 라이브러리 생성

![image](https://github.com/user-attachments/assets/43b43884-dae2-46eb-abdd-2394cb3f4747)<br>
![image](https://github.com/user-attachments/assets/3836f145-7ff5-4d05-a933-5f8d372845a3)<br>
- Tech library에 PDK 공정 세팅

### 3. cell view 설정

![image](https://github.com/user-attachments/assets/95adbc3a-b71b-4127-9295-ef6ce4147b48)<br>
![image](https://github.com/user-attachments/assets/7d4ef654-4f83-4dfc-b6d9-24a5dcbd0a73)<br>
- Cell view에서 내가 설계할 Cell의 이름 설정 후 파일 생성

### 4. 설계환경 세팅
#### 격자 size 세팅
![image](https://github.com/user-attachments/assets/d5b80210-4a10-4ffb-a8db-62378b629b09)<br>
![image](https://github.com/user-attachments/assets/4bf473bb-5254-4c35-b56e-f681506c4f9c)<br>
- 위 사진처럼 세팅하면 격자간 간격이 좁아지며 부드러워짐

### 5. Instance 불러오기
![image](https://github.com/user-attachments/assets/aafe7405-7221-4213-b3e5-9122117ed7a6)<br>
![image](https://github.com/user-attachments/assets/833cb9c3-438d-44e7-b5a5-0fdd1067f6ad)<br>
- 단축키 i를 누르면 instance 불러오는 창 나옴
- library에서 사용할 공정단위의 cell을 불러올 수 있음

### 6. CMOS 속성 설정하기(Channel Width)
![image](https://github.com/user-attachments/assets/6b98a764-10c5-4a28-a838-59bc9825d906)<br>
![image](https://github.com/user-attachments/assets/5b43185a-2634-494f-9aff-1a8b84ae0587)<br>
- 단축키 q를 누르면 cell의 속성창에 들어갈 수 있음
- PMOS(hole)는 NMOS(electron)보다 u(모빌리티)가 약 2배 느림
- 따라서 PMOS의 Channel Width를 NMOS보다 2배 늘여야 함
  - PMOS: 1u
  - NMOS: 0.5u

### 7. Labeling하기
![image](https://github.com/user-attachments/assets/5c572ff6-a733-49d0-b5a1-a2216303fece)<br>
- 단축키 l을 누르면 wire labeling을 할 수 있음
- wire에 이름을 붙일 수 있음

### 8. Pin 배치하기
![image](https://github.com/user-attachments/assets/0e294fb2-adc0-4252-a336-225617e971e1)<br>
![image](https://github.com/user-attachments/assets/dc968a15-97f3-48c6-8fa0-0ef0c6028de9)<br>
- 단축키 P를 누르면 Pin을 배치할 수 있음
- pin 설정에서 input, output pin을 설정할 수 있음
  - 생성된 pin은 동일한 이름의 label을 가진 wire와 연결됨

### 9. Symbol 생성하기
![image](https://github.com/user-attachments/assets/3680efc0-c59e-4bf1-82e5-ca0c31ecf9f3)<br>
![image](https://github.com/user-attachments/assets/aafb0b17-0e43-405f-a4e4-a274a6b12ec3)<br>
- 위 사진의 옵션에 들어가서 Symbol을 세팅함
- symbol port의 위치를 설정가능

![image](https://github.com/user-attachments/assets/e0c15128-be07-452b-a45a-afa23db28035)<br>
- 사진의 화살표에서 Symbol을 그려줄 수 있음
- 해당 도구를 이용해 Inverter 심볼을 그려줌

### 10. 설계한 회로 Test
![image](https://github.com/user-attachments/assets/0552cf1c-2af8-42fa-bc68-c77dd3df1028)<br>
![image](https://github.com/user-attachments/assets/732980b6-f830-471c-a036-ef7bf5132104)<br>
![image](https://github.com/user-attachments/assets/608ea630-9878-48c6-b49b-4048f9496f94)<br>
- 설계한 Cell에서 schematic을 선택하고
- Cell Name의 Test할 파일 이름을 설정 후 생성함

### 11. Test Cell 불러오기
![image](https://github.com/user-attachments/assets/720f5abf-0c7f-4731-9a61-baac9792b428)<br>
- 단축키 i를 눌러 내가 설계한 라이브러리의 Cell을 불러옴

### 12. GND, VDC 세팅하기
![image](https://github.com/user-attachments/assets/4c65190f-bd80-4271-a3dc-841d94c357af)<br>
![image](https://github.com/user-attachments/assets/29f9b9e5-c054-44f7-b2ef-d68107d9dac2)<br>
- Instance의 analog library에서 GND와 VDC를 불러올 수 있음

![image](https://github.com/user-attachments/assets/d2a9250a-4615-4a79-961e-86d2062bf514)<br>
![image](https://github.com/user-attachments/assets/5d19bc86-4ead-4531-af06-321ec72dcb7f)<br>
![image](https://github.com/user-attachments/assets/92441b7c-f168-46c3-9121-7964dc0c1fb5)<br>
![image](https://github.com/user-attachments/assets/407d50a0-01ff-49c6-bd97-bd30289ab53e)<br>
- 불러온 VDC에 대해 VIN, VDD, VSS의 속성에 들어가 전압을 설정
  - VIN: VIN입력
  - VDD: 1입력
  - VSS: 0입력

### 13. 완성 Test Schematic
![image](https://github.com/user-attachments/assets/48b1f55f-e663-48c2-b05b-c7986e51d949)<br>

## Prime Wave 시뮬레이션 세팅
### 1. Prime Wave 켜기
![image](https://github.com/user-attachments/assets/f96cd5bf-c175-4119-8a4d-6f6981a3b68f)<br>
- 해당 툴바로 가면 Prime Wave를 실행시킬 수 있다

### 2. Model File 불러오기
![image](https://github.com/user-attachments/assets/8971d45e-6653-4643-aab0-b6b6f32d5519)<br>
![image](https://github.com/user-attachments/assets/ae9e5214-9811-4d2c-bdda-6d19632dfc89)<br>
![image](https://github.com/user-attachments/assets/156f4b53-f949-4587-ba40-1f0226396436)<br>
![image](https://github.com/user-attachments/assets/89afb9aa-f3fb-4e23-905a-ebbd8f55c34a)<br>
- 위의 과정을 거쳐 hspice 기반 Model file을 불러온다

### 3. HSPICE 설정하기
![image](https://github.com/user-attachments/assets/169b4974-5b5b-4295-9d7d-8a6d2a842593)<br>
![image](https://github.com/user-attachments/assets/52476e55-de41-4daf-9a97-6b8c7cfd7531)<br>

### 4. Design 불러오기
![image](https://github.com/user-attachments/assets/cf25e909-372a-4d8d-808d-cdce02bdd187)<br>
![image](https://github.com/user-attachments/assets/17d362bc-0626-4d1e-89a5-5710ebb6b60e)<br>
- Test할 Cell을 불러온 다음 VIN에 0을 Default로 넣어줌
  - VIN은 NOT_TEST에서 VIN의 속성창에 설정해준 **VIN**임

### 5. 테스트 입력값 설정하기
![image](https://github.com/user-attachments/assets/07bf7725-4ecf-4076-a5f9-dbfd62b87170)<br>
![image](https://github.com/user-attachments/assets/f6eaea7e-3d97-4cda-bbbc-8bdf4678aa8a)<br>

### 6. Test 신호 설정하기
![image](https://github.com/user-attachments/assets/1b100240-4ab6-43d6-9ff6-3269e72aafb9)<br>
![image](https://github.com/user-attachments/assets/b59015a4-57b5-43dc-80d0-98cde93ba007)<br>
- Expression을 누른 후,
- 우측에 pick from design 누름
- 누르면 나오는 Schematic에서 내가 확인할 신호를 선택함

![image](https://github.com/user-attachments/assets/e7b6a382-6727-46ac-93b2-bce60c9529d7)<br>
> 예시

### 7. 시뮬레이션 돌리기
![image](https://github.com/user-attachments/assets/e55b1a91-df88-43bc-871d-612d2b16c9b1)<br>
![image](https://github.com/user-attachments/assets/2cbe4f91-bb06-4c50-b626-b256082c116b)<br>
- 위에 대로 들어가서 누르면 시뮬레이션 실행됨

### 결과
![image](https://github.com/user-attachments/assets/97cc67c8-6b4a-4954-a174-ba1624c2a037)<br>
- Inverter의 동작대로 시뮬레이션 결과가 나온다

## 단축키
- F: Full screen
- W: Wire 단축키
- Q: 속성 단축키
- P: Pin 
	- input pin
	- output pin
- I: Instance 창 열기
- E: 심볼 안
	ctrl+E: 심볼 빠져나옴


## ⭐lock파일 삭제
> 툴이 강제로 종료되어 파일이 읽기모드로 잠긴 경우
- [삭제방법](https://blog.naver.com/PostView.naver?blogId=byoungjin70&logNo=223149305944&categoryNo=1&parentCategoryNo=0&viewDate=&currentPage=8&postListTopCurrentPage=1&from=postView&userTopListOpen=true&userTopListCount=5&userTopListManageOpen=false&userTopListCurrentPage=8)
- cd 라이브러리 이름/Cell이름/schematic/
- rm ./sch.oa.cdslck
- ![image](https://github.com/user-attachments/assets/e63c95c6-edb9-454d-97df-c947fa0f3d0f)<br>

## 수정 필요시
- 논리 게이트 수정필요시
- TR 레벨에서 수정해야함
  - 제일 하위 레벨을 수정해야함
