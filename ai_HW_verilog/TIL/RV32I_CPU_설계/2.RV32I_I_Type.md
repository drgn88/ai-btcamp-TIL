# RV32I-I Type

## âš™ï¸I-Type ì—­í• 

- ë‹¨ì¼ ë ˆì§€ìŠ¤í„°ì™€ **Immediate Value**(ìƒìˆ˜)ì™€ì˜ ì—°ì‚°ì„ ìˆ˜í–‰
- R Type ì—°ì‚° ìˆ˜í–‰ê³¼ ê²°ê³¼ëŠ” **Register File**ì— í•œì •ë˜ì–´ ìˆ˜í–‰ëœë‹¤

|           **I-Type Base Instruction Code**            |
| :---------------------------------------------------: |
| <img src="./img/RV32I_I_Type/I_TYPE_Instruciton.png"> |

- â—**SLLI**, **SRLI**, **SRAI**ëŠ” Immediate ë²”ìœ„ê°€ ë‹¤ë¥¸ ì—°ì‚°ê³¼ ë‹¤ë¦„
  - ì„¤ê³„ì‹œ ê³ ë ¤ ì‚¬í•­

## ğŸ’»I-Type HW Architecture

|                **I-Type HW Architecture**                 |
| :-------------------------------------------------------: |
| <img src="./img/RV32I_I_Type/I_TYPE_HW_Architecture.png"> |

### Imm_Extend
- Instruction Codeì—ì„œ ë“¤ì–´ì˜¤ëŠ” Immediate ë¹„íŠ¸ìˆ˜
  - imm[11:0] == 12bit
    - SLLI, SLRI, SRAI == 5bit
  - ì´ë¥¼ 32ë¹„íŠ¸ë¡œ í™•ì¥í•´ì¤˜ì•¼í•¨
- í™•ì¥ì‹œí‚¤ëŠ” ì¶”ê°€ ëª¨ë“ˆ

â—SLLI, SLRI, SRAI
---
- ë‚˜ë¨¸ì§€ ë‹¤ë¥¸ ì—°ì‚°ì˜ ê²½ìš° ë¶€ì¡±í•œ 20ë¹„íŠ¸ë¥¼ MSBë¡œ ì±„ìš°ë©´ ë¨
- ìœ„ì˜ 3ê°œì˜ ì—°ì‚°ì— ëŒ€í•´ì„  ì–´ë–»ê²Œ ì§„í–‰í•´ì•¼ë˜ëŠ”ê°€
- Instruction Codeì˜ **func3**ë¥¼ ë³´ê³  ê²°ì •í•¨

[ì½”ë“œ êµ¬í˜„]
```verilog
//immm_Extendì—ì„œ ë°œì·Œ
case(opcode) begin
	...

	`OP_TYPE_I: begin
                case (func3)
                    3'b001:  immExt = {27'b0, instrCode[24:20]};  //SLLI
                    3'b011:  immExt = {20'b0, instrCode[31:20]};  //SLTIU
                    3'b101:  immExt = {27'b0, instrCode[24:20]};  //SRLI, SRAI
                    default: immExt = {{20{instrCode[31]}}, instrCode[31:20]};
                endcase
            end
	...
end
```
- Instruction Codeì—ì„œ func3ì— í•´ë‹¹í•˜ëŠ” 3ë¹„íŠ¸ë¥¼ ë³´ê³  í™•ì¥ ë°©ì‹ì„ ê²°ì •í•¨
- SLLI(3'b001), SRLI, SRAI(3'b101), SRAI(3'b011)ì˜ ê²½ìš°
  - ë‹¤ë¥¸ Caseì™€ ë‹¬ë¦¬ Zero Paddingì„ ìˆ˜í–‰

### ALUSrcMux
- R-Type
  - Register Fileì—ì„œ ë‚˜ì˜¤ëŠ” rs1ê³¼ rs2ê°€ ALUë¡œ ë“¤ì–´ê°
- I-Type
  - Register Fileì—ì„œ ë‚˜ì˜¤ëŠ” rs1ê³¼ Instruction Codeì—ì„œ ì „ë‹¬ë˜ëŠ” immediate Valueê°€ ALUì— ë“¤ì–´ê°
- rs2ì™€ immediate valueì¤‘ aluì— ë“¤ì–´ê°ˆ ê°’ì„ ì„ íƒí•´ì¤˜ì•¼í•¨ => **Mux**

# ğŸ”Simulation ê²€ì¦

## âš™ï¸RegisterFile Setting

```verilog
//////////////////////////////////TESTìš©
	initial begin  // for simulation test
        for (int i = 0; i < 32; i++) begin
            mem[i] = 10 + i;
        end
        mem[28] = 32'b1111_0000_0000_0000_0000_0000_0000_0000;
    end
/////////////////////////////////
```

- Register Fileì˜ ê° ë©”ëª¨ë¦¬ì— ëŒ€í•´ (10+ë ˆì§€ìŠ¤í„°ë²ˆí˜¸)ë¥¼ ì´ˆê¸°ê°’ìœ¼ë¡œ ë„£ì–´ì¤Œ

## âš™ï¸ROM Setting

```verilog
//////////////////////////////////TESTìš©
	//rom[x]=32'b imm12 _ rs1 _f3 _ rd  _ op  //I-Type
    rom[6] = 32'b000000000001_00001_000_01001_0010011;//addi x9, x1, 1
    rom[7] = 32'b000000000100_00010_111_01010_0010011;//andi x10, x2, 2
    rom[8] = 32'b000000000001_00010_110_01011_0010011;//ori x11, x2, 1
    rom[9] = 32'b000000000101_00010_001_01100_0010011;//slli x12, x2, 5
    rom[10] = 32'b000000000101_00010_101_01101_0010011;//srli x13, x2, 5
    rom[11] = 32'b010000000011_11100_101_01110_0010011;//srai x14, x28, 3
    rom[12] = 32'b000000001010_11100_010_01111_0010011;//slti x15, x28, 10
    rom[13] = 32'b000000000101_00010_011_10000_0010011;//sltiu x16, x2, 5
    rom[14] = 32'b000000000111_00001_100_10001_0010011;//xori x17, x1, 7
//////////////////////////////////
```

## âœ”ï¸Simulation Verification

### ADDI

```verilog
//Machine Code
rom[6] = 32'b000000000001_00001_000_01001_0010011;//addi x9, x1, 1
```

|               addi x9, x1, 1                |
| :-----------------------------------------: |
| <img src="./img/RV32I_I_Type/addiê²€ì¦.png"> |

| X1(rs1) | 32'd11 |
| :-----: | :----: |
|   Imm   | 32'd1  |
| X9(rd)  | 32'd12 |

- x9(12) = x1(11) + imm(1)
  - âœ…ì •ìƒìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤

### ANDI

```verilog
//Machine Code
rom[7] = 32'b000000000100_00010_111_01010_0010011;//andi x10, x2, 2
```

|               andi x10, x2, 2               |
| :-----------------------------------------: |
| <img src="./img/RV32I_I_Type/andiê²€ì¦.png"> |

| X2(rs1) |   32'b0000_0000_0000_0000_0000_0000_0000_1100   |
| :-----: | :---------------------------------------------: |
|   Imm   | 32'b0000_0000_0000_0000_0000_0000_0000_**0100** |
| X10(rd) | 32'b0000_0000_0000_0000_0000_0000_0000_**0100** |

- âœ…ì •ìƒìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤

### ORI

```verilog
//Machine Code
rom[8] = 32'b000000000001_00010_110_01011_0010011;//ori x11, x2, 1
```

|               ori x11, x2, 1               |
| :----------------------------------------: |
| <img src="./img/RV32I_I_Type/oriê²€ì¦.png"> |


| X2(rs1) | 32'b0000_0000_0000_0000_0000_0000_0000_**1100** |
| :-----: | :---------------------------------------------: |
|   Imm   | 32'b0000_0000_0000_0000_0000_0000_0000_**0001** |
| X11(rd) | 32'b0000_0000_0000_0000_0000_0000_0000_**1101** |

- âœ…ì •ìƒìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤

### SLLI

```verilog
//Machine Code
rom[9] = 32'b000000000101_00010_001_01100_0010011;//slli x12, x2, 5
```

|               slli x12, x2, 5               |
| :-----------------------------------------: |
| <img src="./img/RV32I_I_Type/slliê²€ì¦.png"> |


| X2(rs1) |   32'b0000_0000_0000_0000_0000_0000_0000_**1100**    |
| :-----: | :--------------------------------------------------: |
|   Imm   |                        32'd5                         |
| X12(rd) | 32'b0000_0000_0000_0000_0000_000**1_100**_**0_0000** |

- âœ…ì •ìƒìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤

### SRLI

```verilog
//Machine Code
rom[10] = 32'b000000000101_00010_101_01101_0010011;//srli x13, x2, 5
```

|               srli x13, x2, 5               |
| :-----------------------------------------: |
| <img src="./img/RV32I_I_Type/srliê²€ì¦.png"> |


| X2(rs1) | 32'b0000_0000_0000_0000_0000_0000_0000_**1100** |
| :-----: | :---------------------------------------------: |
|   Imm   |                      32'd5                      |
| X13(rd) |   32'b0000_0000_0000_0000_0000_0000_0000_0000   |

- âœ…ì •ìƒìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤

### SRAI

```verilog
//Machine Code
rom[11] = 32'b010000000011_11100_101_01110_0010011;//srai x14, x28, 3
```

|              srai x14, x28, 3               |
| :-----------------------------------------: |
| <img src="./img/RV32I_I_Type/sraiê²€ì¦.png"> |


| X28(rs1) |   32'b1111_0000_0000_0000_0000_0000_0000_0000   |
| :------: | :---------------------------------------------: |
|   Imm    |                      32'd3                      |
| X14(rd)  | 32'b**111**1_1110_0000_0000_0000_0000_0000_0000 |

- âœ…ì •ìƒìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤

### SLTI

```verilog
//Machine Code
rom[12] = 32'b000000001010_11100_010_01111_0010011;//slti x15, x28, 10
```

|              slti x15, x28, 10              |
| :-----------------------------------------: |
| <img src="./img/RV32I_I_Type/sltiê²€ì¦.png"> |


| X28(rs1) | -32'd268435456 |
| :------: | :------------: |
|   Imm    |     32'd10     |
| X15(rd)  |     32'd1      |

- âœ…ì •ìƒìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤

### SLTIU

```verilog
//Machine Code
rom[13] = 32'b000000000101_00010_011_10000_0010011;//sltiu x16, x2, 5
```

|               sltiu x16, x2, 5               |
| :------------------------------------------: |
| <img src="./img/RV32I_I_Type/sltiuê²€ì¦.png"> |


| X2(rs1) | 32'd12 |
| :-----: | :----: |
|   Imm   | 32'd5  |
| X16(rd) | 32'd0  |

- âœ…ì •ìƒìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤

### XORI

```verilog
//Machine Code
rom[14] = 32'b000000000111_00001_100_10001_0010011;//xori x17, x1, 7
```

|               xori x17, x1, 7               |
| :-----------------------------------------: |
| <img src="./img/RV32I_I_Type/xoriê²€ì¦.png"> |


| X1(rs1) |   32'b0000_0000_0000_0000_0000_0000_0000_1011   |
| :-----: | :---------------------------------------------: |
|   Imm   | 32'b0000_0000_0000_0000_0000_0000_0000_**0111** |
| X11(rd) | 32'b0000_0000_0000_0000_0000_0000_0000_**1100** |

- âœ…ì •ìƒìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤
